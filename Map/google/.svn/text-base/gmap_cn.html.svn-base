<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3c.org/TR/1999/REC-html401-19991224/loose.dtd">
<HTML><HEAD><TITLE></TITLE>
<META content="text/html; charset=UTF-8" http-equiv=Content-Type>
<LINK rel=stylesheet type=text/css href="theme/common.css">
<SCRIPT type=text/javascript src="js/common.js"></SCRIPT>

<script type="text/javascript"  
      src="http://maps.google.cn/maps/api/js?v=3&key=AIzaSyA_p3PJiPd-kBAhKm9ck2BeFi0WNQrA8d0&libraries=places" >  
    </script>  

<SCRIPT type=text/javascript src="js/json2.js"></SCRIPT>
<SCRIPT type=text/javascript src="js/jquery-1.4.2.js"></SCRIPT>
<SCRIPT type=text/javascript src="js/hashtable.js"></SCRIPT>
<SCRIPT type=text/javascript src="js/vehicle.js"></SCRIPT>
<SCRIPT type=text/javascript src="js/function.js"></SCRIPT>
<SCRIPT type=text/javascript src="js/map-google.js"></SCRIPT>
<SCRIPT type=text/javascript src="js/public.js"></SCRIPT>
<SCRIPT type=text/javascript src="js/popupmarker.js"></SCRIPT>
<SCRIPT type=text/javascript src="js/namemarker.js"></SCRIPT>
<SCRIPT type=text/javascript src="js/mapmarker.js"></SCRIPT>
<SCRIPT type=text/javascript src="js/maptrack.js"></SCRIPT>
<SCRIPT type=text/javascript src="js/mapframe.js"></SCRIPT>
<SCRIPT type=text/javascript src="js/ev-google.js"></SCRIPT>
<SCRIPT type=text/javascript src="js/lang.js"></SCRIPT>
<SCRIPT type=text/javascript>
var	lang = null;
var GFRAME = new mapframe();

function initialize() {
	initCommon("theme/");

	GFRAME.createMap(true);
	
	document.getElementById('spanCurMap').innerText = lang.mapGoogle;
	document.getElementById('liMap0').style.display = "none";
	
}

function search(){
	var input = document.getElementById('pac-input');
	var searchBox = new google.maps.places.SearchBox(input);
	GFRAME.map.controls[google.maps.ControlPosition.TOP_LEFT].push(input);
	// Bias the SearchBox results towards current map's viewport.
	GFRAME.map.addListener('bounds_changed', function() {
		searchBox.setBounds(GFRAME.map.getBounds());
	});
	
	var markers = [];
        // Listen for the event fired when the user selects a prediction and retrieve
        // more details for that place.
        searchBox.addListener('places_changed', function() {
          var places = searchBox.getPlaces();
          if (places.length == 0) {
            return;
          }

          // Clear out the old markers.
          markers.forEach(function(marker) {
            marker.setMap(null);
          });
          markers = [];

          // For each place, get the icon, name and location.
          var bounds = new google.maps.LatLngBounds();
          places.forEach(function(place) {
            if (!place.geometry) {
              console.log("Returned place contains no geometry");
              return;
            }
            var icon = {
              url: place.icon,
              size: new google.maps.Size(71, 71),
              origin: new google.maps.Point(0, 0),
              anchor: new google.maps.Point(17, 34),
              scaledSize: new google.maps.Size(25, 25)
            };
			
		
            // Create a marker for each place.
			var mk=new google.maps.Marker({
              map: GFRAME.map,
              icon: icon,
              title: place.name+'('+place.formatted_address+')',
              position: place.geometry.location
            });
            
			
			google.maps.event.addListener(mk, 'click', function() {
				GFRAME.map.setZoom(9);
				GFRAME.map.setCenter(mk.getPosition());
				var potion=mk.getPosition().toString();
				var potions=potion.substring(1,potion.length).substring(0,potion.length-2).split(",");
				if (window.navigator.userAgent.indexOf("Chrome") !== -1 ? true : false){
					app.sendMessage('OnMapMarker', [102,potions[0].toString(),potions[1].toString(), mk.title.toString()]);
				}else{
					window.external.OnMapMarker(102, potions[0].toString(),potions[1].toString(),mk.title.toString());
				}
			});
			
			markers.push(mk);
            if (place.geometry.viewport) {
              // Only geocodes have viewport.
              bounds.union(place.geometry.viewport);
            } else {
              bounds.extend(place.geometry.location);
            }
          });
          GFRAME.map.fitBounds(bounds);
        });

}

</SCRIPT>

<META name=GENERATOR content="MSHTML 8.00.6001.19088">
<style type="text/css">
 /* Always set the map height explicitly to define the size of the div
       * element that contains the map. */
      #map {
        height: 100%;
      }
      /* Optional: Makes the sample page fill the window. */
      html, body {
        height: 100%;
        margin: 0;
        padding: 0;
      }
      .controls {
        margin-top: 10px;
        border: 1px solid transparent;
        border-radius: 2px 0 0 2px;
        box-sizing: border-box;
        -moz-box-sizing: border-box;
        height: 28px;
        outline: none;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
      }

      #pac-input {
        background-color: #fff;
        font-family: Roboto;
        font-size: 15px;
        font-weight: 300;
        margin-left: 42px;
        padding: 0 11px 0 13px;
        text-overflow: ellipsis;
        width: 300px;
		 position: absolute;
		 z-index:99999
      }

      #pac-input:focus {
        border-color: #4d90fe;
      }

      .pac-container {
        font-family: Roboto;
      }

      #type-selector {
        color: #fff;
        background-color: #4d90fe;
        padding: 5px 11px 0px 11px;
      }

      #type-selector label {
        font-family: Roboto;
        font-size: 13px;
        font-weight: 300;
      }
      #target {
        width: 345px;
      }
</style>
</HEAD>
<BODY oncontextmenu="return false;" onresize=GFRAME.restFrame(); onload=initialize();>
<DIV id=FrameCanvas>
	<DIV id=mapbar>
		<DIV id=maptoolbar style="padding-left:6px;">
			<img id="addPoint" src="./image/addpoint.gif" style="padding-top:2px;display:none;" onclick="addMarkerPoint()"/>
			<img id="addRectangle" src="./image/addrectangle.gif" style="padding-top:2px;display:none;" onclick="addMarkerRectangle()"/>
			<img id="addPolygon" src="./image/addpolygon.gif" style="padding-top:2px;display:none;" onclick="addMarkerPolygon()"/>
			<img id="addLine" src="./image/addline.gif" style="padding-top:2px;display:none;" onclick="addMarkerLine()"/>
			<img id="btnSearch" src="./image/search.gif" style="padding-top:2px;display:none;" onclick="searchVehi()"/>
			<img id="btnFullScreen" src="./image/fullscreen.gif" style="padding-top:2px;display:none;" onclick="fullScreen()"/>
			<img id="btnCenter" src="./image/savemapconfig.gif" style="padding-top:2px;display:none;" onclick="getCenter()"/>
		</DIV>
		<div id="selectMap" onMouseOver="showMapSelect();"  onMouseOut="hideMapSelect();" style="display:none;padding-top:4px;width: 98px; height: 21px; border: 1px solid rgb(166, 166, 166); z-index: 100; float: right; " class="cat_list_type" id="cat_list">
			<div id="mapMenu" class="h2_cat_type"><h3 id="txt"><span id="spanCurMap"></span></h3>
				<div class="h3_cat_type">
					<div class="shadow_border_type">
						<ul>
							<li style="display:none;" id="liMap3"><a href="javascript:switchMapTo('3');"><span id="spanMap3"></span></a></li>	<!--百度-->
							<li style="display:none;" id="liMap9"><a href="javascript:switchMapTo('9');"><span id="spanMap9"></span></a></li>  <!--Mapbar-->
							<li style="display:none;" id="liMap0"><a href="javascript:switchMapTo('0');"><span id="spanMap0"></span></a></li>  <!--谷歌-->
							<li style="display:none;" id="liMap8"><a href="javascript:switchMapTo('8');"><span id="spanMap8"></span></a></li>  <!--Arcgis-->
							<li style="display:none;" id="liMap1"><a href="javascript:switchMapTo('1');"><span id="spanMap1"></span></a></li>  <!--MapInfo-->
						</ul>
					</div>
				</div>
			</div>
		</div>
		<DIV id=mapbarRight>
			<img id="btnExpand" src="./image/expand.jpg" style="padding-top:2px;display:none;" onclick="expand()"/>
		</DIV>
		<DIV id="overVehicleAddress"></DIV>
	</DIV>
	<input id="pac-input" class="controls" type="text" placeholder="Search Box">
	<DIV id=mapcanvas></DIV>
</DIV>
<SPAN id=menu_more onmouseover=clearInterval(_s); onmouseout="hidemore('menu_more',300)"></SPAN>
<span id="tip" unselectable="on" style="position: absolute; z-index: 10; background:#FBFFD7; border:solid 1px #999999; font-weight: bold; l"></span>
</BODY>
</HTML>